{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "se.egelberg.tesla.vehicle",
  "version": "1.0.0",
  "compatibility": ">=5.0.0",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Tesla Vehicle"
  },
  "brandColor": "#cc0100",
  "description": {
    "en": "Control your Tesla with Homey",
    "sv": "Styr din Tesla med Homey"
  },
  "category": [
    "tools"
  ],
  "permissions": [
    "homey:manager:geolocation"
  ],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "Magnus Egelberg",
    "email": "magnus.egelberg@gmail.com"
  },
  "flow": {
    "actions": [
      {
        "title": {
          "en": "Log to console",
          "sv": "Logga"
        },
        "args": [
          {
            "type": "text",
            "name": "message",
            "placeholder": {
              "en": "Message",
              "sv": "Meddelande"
            }
          }
        ],
        "id": "log-to-console"
      },
      {
        "id": "defrost-for-a-while",
        "title": {
          "en": "Activate for a while",
          "sv": "Slå på ett tag"
        },
        "titleFormatted": {
          "en": "Activate for [[minutes]] minutes",
          "sv": "Slå på i [[minutes]] minuter"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=defrost"
          },
          {
            "type": "number",
            "name": "minutes",
            "placeholder": {
              "en": "Minutes",
              "sv": "Minuter"
            },
            "min": 1,
            "max": 120,
            "step": 1
          }
        ]
      },
      {
        "id": "hvac-for-a-while",
        "title": {
          "en": "Activate for a while",
          "sv": "Slå på ett tag"
        },
        "titleFormatted": {
          "en": "Activate for [[minutes]] minutes",
          "sv": "Slå på i [[minutes]] minuter"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=hvac"
          },
          {
            "type": "number",
            "name": "minutes",
            "placeholder": {
              "en": "Minutes",
              "sv": "Minuter"
            },
            "min": 1,
            "max": 120,
            "step": 1
          }
        ]
      },
      {
        "id": "wake-up",
        "title": {
          "en": "Wake up",
          "sv": "Väck bilen"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-set-location",
        "title": {
          "en": "Set current location",
          "sv": "Ange aktuell plats"
        },
        "titleFormatted": {
          "en": "Set current location to [[location]]",
          "sv": "Sätt aktuell plats till [[location]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          },
          {
            "type": "text",
            "name": "location",
            "placeholder": {
              "en": "Location",
              "sv": "Plats"
            }
          }
        ]
      }
    ],
    "triggers": [
      {
        "id": "vehicle-inside-geofence",
        "title": {
          "en": "Came home",
          "sv": "Kom hem"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-location-changed",
        "title": {
          "en": "Location changed",
          "sv": "Ändrade plats"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-outside-geofence",
        "title": {
          "en": "Left home",
          "sv": "Körde hemifrån"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-state-changed",
        "title": {
          "en": "State changed",
          "sv": "Online/offline ändrades"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-online",
        "title": {
          "en": "Online",
          "sv": "Online"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-offline",
        "title": {
          "en": "Offline",
          "sv": "Offline"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-started-driving",
        "title": {
          "en": "Started driving",
          "sv": "Började köra"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-stopped-driving",
        "title": {
          "en": "Parked",
          "sv": "Parkerades"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-charging-started",
        "title": {
          "en": "Started charging",
          "sv": "Började ladda"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-charging-stopped",
        "title": {
          "en": "Stopped charging",
          "sv": "Slutade ladda"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-speed-changed",
        "title": {
          "en": "Speed changed",
          "sv": "Hastigheten ändrades"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "inner-temperature-changed",
        "title": {
          "en": "Inner temperature changed",
          "sv": "Innertemperaturen ändrades"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "outer-temperature-changed",
        "title": {
          "en": "Outer temperature changed",
          "sv": "Yttertemperaturen ändrades"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "vehicle-is-at-home",
        "title": {
          "en": "!{{Is|Is not}} home",
          "sv": "!{{Är hemma|Är inte hemma}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-is-charging",
        "title": {
          "en": "!{{Is|Is not}} charging",
          "sv": "!{{Laddar|Laddar inte}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-is-driving",
        "title": {
          "en": "!{{Is|Is not}} driving",
          "sv": "!{{Kör|Är Parkerad}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-is-online",
        "title": {
          "en": "Is !{{online|offline}}",
          "sv": "Är !{{online|online}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-is-locked",
        "title": {
          "en": "Is !{{locked|unlocked}} locked",
          "sv": "Är !{{Låst|upplåst}}"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          }
        ]
      },
      {
        "id": "vehicle-is-near-location",
        "title": {
          "en": "Är !{{nära|inte nära}} en plats"
        },
        "titleFormatted": {
          "en": "!{{Is at|Is not at}} [[location]] ([[latitude]], [[longitude]])",
          "sv": "!{{Är på plats|Är inte på plats}} [[location]] ([[latitude]], [[longitude]])"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          },
          {
            "type": "text",
            "name": "location",
            "placeholder": {
              "en": "Location",
              "sv": "Plats"
            }
          },
          {
            "type": "number",
            "name": "latitude",
            "placeholder": {
              "en": "Latitude"
            }
          },
          {
            "type": "number",
            "name": "longitude",
            "placeholder": {
              "en": "Longitude"
            }
          }
        ]
      },
      {
        "id": "vehicle-is-near-location-with-radius",
        "title": {
          "en": "Is !{{near|not near}} a location with a radius",
          "sv": "Är !{{nära|inte nära}} a plats inom en radie"
        },
        "titleFormatted": {
          "en": "Is !{{near|not near}} [[location]] within a radius of [[radius]] km ([[latitude]], [[longitude]])",
          "sv": "Är !{{nära|inte nära}} [[location]] inom en radie på [[radius]] km ([[latitude]], [[longitude]])"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=vehicle"
          },
          {
            "type": "text",
            "name": "location",
            "placeholder": {
              "en": "Location",
              "sv": "Plats"
            }
          },
          {
            "type": "number",
            "name": "radius",
            "placeholder": {
              "en": "Radius"
            }
          },
          {
            "type": "number",
            "name": "latitude",
            "placeholder": {
              "en": "Latitude"
            }
          },
          {
            "type": "number",
            "name": "longitude",
            "placeholder": {
              "en": "Longitude"
            }
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "name": {
        "en": "Defrost",
        "sv": "Avfrosta"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/defrost/assets/images/small.png",
        "large": "/drivers/defrost/assets/images/large.png",
        "xlarge": "/drivers/defrost/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "defrost"
    },
    {
      "name": {
        "en": "Frunk",
        "sv": "Framlucka"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/frunk/assets/images/small.png",
        "large": "/drivers/frunk/assets/images/large.png",
        "xlarge": "/drivers/frunk/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "frunk"
    },
    {
      "name": {
        "en": "Air conditioner",
        "sv": "Fläkt/AC"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/hvac/assets/images/small.png",
        "large": "/drivers/hvac/assets/images/large.png",
        "xlarge": "/drivers/hvac/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "hvac"
    },
    {
      "name": {
        "en": "Inner temperature",
        "sv": "Innertemperatur"
      },
      "class": "sensor",
      "capabilities": [
        "measure_temperature"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/inner-temperature/assets/images/small.png",
        "large": "/drivers/inner-temperature/assets/images/large.png",
        "xlarge": "/drivers/inner-temperature/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "inner-temperature"
    },
    {
      "name": {
        "en": "Lock",
        "sv": "Lås"
      },
      "class": "lock",
      "capabilities": [
        "locked"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/lock/assets/images/small.png",
        "large": "/drivers/lock/assets/images/large.png",
        "xlarge": "/drivers/lock/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "lock",
      "settings": [
        {
          "id": "remoteStartDrivePassword",
          "type": "text",
          "label": {
            "en": "Password for keyless driving",
            "sv": "Lösenord för nyckellös körning"
          },
          "hint": {
            "en": "If specified your car will be ready to drive without your keycard present when unlocking.",
            "sv": "Anger du lösenord här behöver du inte din bilnyckel (kortet) för att köra iväg när du låser upp."
          },
          "value": ""
        }
      ]
    },
    {
      "name": {
        "en": "Outer temperature",
        "sv": "Yttertemperatur"
      },
      "class": "sensor",
      "capabilities": [
        "measure_temperature"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/outer-temperature/assets/images/small.png",
        "large": "/drivers/outer-temperature/assets/images/large.png",
        "xlarge": "/drivers/outer-temperature/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "outer-temperature"
    },
    {
      "name": {
        "en": "Ping",
        "sv": "Ping"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/ping/assets/images/small.png",
        "large": "/drivers/ping/assets/images/large.png",
        "xlarge": "/drivers/ping/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "ping"
    },
    {
      "name": {
        "en": "Settings",
        "sv": "Inställningar"
      },
      "class": "other",
      "capabilities": [],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/settings/assets/images/small.png",
        "large": "/drivers/settings/assets/images/large.png",
        "xlarge": "/drivers/settings/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "settings",
      "settings": [
        {
          "id": "refreshToken",
          "type": "text",
          "label": {
            "en": "Security token issued by Tesla",
            "sv": "Säkerhetsnyckel från Tesla"
          },
          "value": "",
          "hint": {
            "en": "A mandatory token used to communicate with Tesla. Use a tool like 'Auth for Tesla' to generate such a token. Often refered as a 'refresh token'",
            "sv": "En obligatorisk nyckel för att komma åt din Tesla. Använd verktyg som 'Auth for Tesla' för att generera en sådan nyckel. Kallas ofta en 'refresh token'."
          }
        }
      ]
    },
    {
      "name": {
        "en": "Steering wheel heater",
        "sv": "Rattvärme"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/steering-wheel-heater/assets/images/small.png",
        "large": "/drivers/steering-wheel-heater/assets/images/large.png",
        "xlarge": "/drivers/steering-wheel-heater/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "steering-wheel-heater"
    },
    {
      "name": {
        "en": "Trunk",
        "sv": "Baklucka"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/trunk/assets/images/small.png",
        "large": "/drivers/trunk/assets/images/large.png",
        "xlarge": "/drivers/trunk/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "trunk"
    },
    {
      "name": {
        "en": "Tesla",
        "sv": "Tesla"
      },
      "class": "other",
      "capabilities": [
        "vehicle_location",
        "vehicle_charging_speed",
        "vehicle_charge_power",
        "vehicle_speed",
        "vehicle_distance_from_homey",
        "vehicle_odometer",
        "vehicle_state",
        "vehicle_inside_temperature",
        "vehicle_outside_temperature",
        "measure_battery",
        "vehicle_battery_range",
        "vehicle_charging_state"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/vehicle/assets/images/small.png",
        "large": "/drivers/vehicle/assets/images/large.png",
        "xlarge": "/drivers/vehicle/assets/images/xlarge.png"
      },
      "settings": [
        {
          "id": "pollInterval",
          "type": "number",
          "label": {
            "en": "Specify default poll interval",
            "sv": "Uppdateringsfrekvens"
          },
          "value": 3,
          "hint": {
            "en": "Specify the poll interval in minutes. When polling, it does not wake up your vehicle. It only fetches the online/offline state.",
            "sv": "Ange hur ofta bilens tillstånd ska uppdateras i minuter. Det kommer inte att väcka bilen utan det är bara tillståndet som hämtas. Online eller Offline."
          }
        }
      ],
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "vehicle"
    },
    {
      "name": {
        "en": "Ventilation",
        "sv": "Ventilation"
      },
      "class": "button",
      "capabilities": [
        "onoff"
      ],
      "platforms": [
        "local"
      ],
      "connectivity": [],
      "images": {
        "small": "/drivers/ventilation/assets/images/small.png",
        "large": "/drivers/ventilation/assets/images/large.png",
        "xlarge": "/drivers/ventilation/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "id": "ventilation"
    }
  ],
  "capabilities": {
    "vehicle_battery_range": {
      "type": "number",
      "title": {
        "en": "Battery range",
        "sv": "Kilometer"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "km"
      },
      "icon": "./assets/capabilities/vehicle_battery_range.svg"
    },
    "vehicle_charge_power": {
      "type": "number",
      "title": {
        "en": "Charge power",
        "sv": "Laddningseffekt"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "W"
      },
      "icon": "./assets/capabilities/vehicle_charge_power.svg"
    },
    "vehicle_charging_speed": {
      "type": "number",
      "title": {
        "en": "Charging speed",
        "sv": "Laddningshastighet"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "km/h"
      },
      "icon": "./assets/capabilities/vehicle_charging_speed.svg"
    },
    "vehicle_charging_state": {
      "type": "string",
      "title": {
        "en": "Charging state",
        "sv": "Laddning"
      },
      "getable": true,
      "setable": false,
      "icon": "./assets/capabilities/vehicle_charging_state.svg"
    },
    "vehicle_distance_from_homey": {
      "type": "number",
      "title": {
        "en": "Away from Homey",
        "sv": "Avstånd hemifrån"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "km"
      },
      "icon": "./assets/capabilities/vehicle_distance_from_homey.svg"
    },
    "vehicle_inside_temperature": {
      "type": "number",
      "title": {
        "en": "Inner temperature",
        "sv": "Innertemperatur"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "°C"
      },
      "icon": "./assets/capabilities/vehicle_inside_temperature.svg"
    },
    "vehicle_location": {
      "type": "string",
      "title": {
        "en": "Location",
        "sv": "Plats"
      },
      "getable": true,
      "setable": true,
      "icon": "./assets/capabilities/vehicle_location.svg"
    },
    "vehicle_odometer": {
      "type": "number",
      "title": {
        "en": "Odometer",
        "sv": "Odometer"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "km"
      },
      "icon": "./assets/capabilities/vehicle_odometer.svg"
    },
    "vehicle_outside_temperature": {
      "type": "number",
      "title": {
        "en": "Outer temperature",
        "sv": "Yttertemperatur"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "°C"
      },
      "icon": "./assets/capabilities/vehicle_outside_temperature.svg"
    },
    "vehicle_speed": {
      "type": "number",
      "title": {
        "en": "Speed",
        "sv": "Hastighet"
      },
      "getable": true,
      "setable": false,
      "units": {
        "en": "km/h"
      },
      "icon": "./assets/capabilities/vehicle_speed.svg"
    },
    "vehicle_state": {
      "type": "string",
      "title": {
        "en": "State",
        "sv": "Status"
      },
      "getable": true,
      "setable": false,
      "icon": "./assets/capabilities/vehicle_state.svg"
    }
  }
}